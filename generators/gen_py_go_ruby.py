#!/usr/bin/env python3
import os
BASE = os.path.dirname(os.path.abspath(__file__))

# PYTHON
pkgs = [
    'Django==2.2.0','Jinja2==2.11.3','pillow==8.3.2','urllib3==1.26.5',
    'requests==2.31.0','flask==2.3.2','numpy==1.24.4','pandas==2.0.1',
    'scikit-learn==1.2.2','pytest==7.3.1','black==23.3.0','fastapi==0.95.2',
    'uvicorn==0.22.0','sqlalchemy==2.0.12',
    'tornado==6.3.2','bottle==0.12.25','cherrypy==18.8.0','falcon==3.1.1',
    'sanic==23.3.0','starlette==0.27.0','aiohttp==3.8.4','httpx==0.24.1',
    'gunicorn==20.1.0','waitress==2.1.2','daphne==4.0.0',
    'djangorestframework==3.14.0','django-cors-headers==4.0.0',
    'django-filter==23.2','django-extensions==3.2.3',
    'django-debug-toolbar==4.1.0','django-allauth==0.54.0',
    'django-celery-beat==2.5.0','django-redis==5.2.0',
    'django-storages==1.13.2','django-crispy-forms==2.0',
    'django-environ==0.10.0','django-guardian==2.4.0',
    'django-import-export==3.2.0','django-mptt==0.14.0',
    'django-taggit==4.0.0','django-widget-tweaks==1.5.0',
    'scipy==1.10.1','matplotlib==3.7.1','seaborn==0.12.2',
    'plotly==5.14.1','bokeh==3.1.1','altair==5.0.1',
    'statsmodels==0.14.0','sympy==1.12','networkx==3.1',
    'xgboost==1.7.5','lightgbm==3.3.5','catboost==1.2',
    'tensorflow==2.12.0','keras==2.12.0','torch==2.0.1',
    'torchvision==0.15.2','torchaudio==2.0.2',
    'transformers==4.30.1','datasets==2.13.0','tokenizers==0.13.3',
    'huggingface-hub==0.15.1','accelerate==0.20.3',
    'diffusers==0.17.1','safetensors==0.3.1',
    'opencv-python==4.7.0.72','scikit-image==0.21.0',
    'spacy==3.5.3','nltk==3.8.1','gensim==4.3.1',
    'dask==2023.5.0','polars==0.18.3',
    'pyarrow==12.0.0','openpyxl==3.1.2','xlrd==2.0.1',
    'xlsxwriter==3.1.2','tabulate==0.9.0',
    'psycopg2-binary==2.9.6','pymysql==1.0.3','pymongo==4.3.3',
    'redis==4.5.5','elasticsearch==8.8.0','cassandra-driver==3.28.0',
    'neo4j==5.9.0','influxdb-client==1.36.1',
    'alembic==1.11.1','asyncpg==0.27.0','motor==3.1.2',
    'peewee==3.16.2','tortoise-orm==0.19.3',
    'boto3==1.26.137','botocore==1.29.137',
    'google-cloud-storage==2.9.0','google-cloud-bigquery==3.11.0',
    'google-cloud-pubsub==2.17.0','google-cloud-firestore==2.11.1',
    'google-api-python-client==2.88.0','google-auth==2.19.1',
    'azure-storage-blob==12.16.0','azure-identity==1.13.0',
    'azure-cosmos==4.4.0','azure-keyvault-secrets==4.7.0',
    'docker==6.1.2','kubernetes==26.1.0',
    'ansible==8.0.0','fabric==3.1.0','paramiko==3.2.0',
    'celery==5.3.0','kombu==5.3.0','dramatiq==1.14.2',
    'rq==1.15.1','huey==2.4.5',
    'pytest-cov==4.1.0','pytest-mock==3.10.0','pytest-asyncio==0.21.0',
    'pytest-xdist==3.3.1','pytest-django==4.5.2',
    'hypothesis==6.75.3','faker==18.9.0','factory-boy==3.2.1',
    'responses==0.23.1','freezegun==1.2.2',
    'coverage==7.2.7','tox==4.6.0','nox==2023.4.22',
    'mypy==1.3.0','pylint==2.17.4',
    'flake8==6.0.0','ruff==0.0.272','isort==5.12.0',
    'bandit==1.7.5','safety==2.3.5',
    'pyyaml==6.0','toml==0.10.2','tomli==2.0.1',
    'msgpack==1.0.5','protobuf==4.23.2','grpcio==1.54.2',
    'grpcio-tools==1.54.2','marshmallow==3.19.0',
    'pydantic==1.10.8','attrs==23.1.0','cattrs==23.1.2',
    'orjson==3.9.0','ujson==5.7.0','simplejson==3.19.1',
    'click==8.1.3','typer==0.9.0','rich==13.4.1',
    'tqdm==4.65.0','python-dateutil==2.8.2',
    'arrow==1.2.3','pendulum==2.1.2','pytz==2023.3','babel==2.12.1',
    'cryptography==41.0.1','pyjwt==2.7.0','python-jose==3.3.0',
    'passlib==1.7.4','argon2-cffi==21.3.0',
    'python-dotenv==1.0.0','pydantic-settings==2.0.1',
    'httptools==0.5.0','python-multipart==0.0.6',
    'aiofiles==23.1.0','watchdog==3.0.0',
    'apscheduler==3.10.1','schedule==1.2.0',
    'tenacity==8.2.2','backoff==2.2.1',
    'cachetools==5.3.1','diskcache==5.6.1',
    'lxml==4.9.2','beautifulsoup4==4.12.2','html5lib==1.1',
    'scrapy==2.9.0','selenium==4.10.0','playwright==1.34.0',
    'reportlab==4.0.4','weasyprint==59.0',
    'python-pptx==0.6.21','python-docx==0.8.11',
    'pypdf2==3.0.1','pdfplumber==0.9.0',
    'chardet==5.1.0','charset-normalizer==3.1.0',
    'idna==3.4','certifi==2023.5.7',
    'wrapt==1.15.0','decorator==5.1.1','boltons==23.0.0',
    'more-itertools==9.1.0','toolz==0.12.0',
    'structlog==23.1.0','loguru==0.7.0',
    'sentry-sdk==1.25.0','prometheus-client==0.17.0',
    'opentelemetry-api==1.18.0','opentelemetry-sdk==1.18.0',
    'graphene==3.2.2','strawberry-graphql==0.185.0',
    'websockets==11.0.3','channels==4.0.0',
    'pika==1.3.2','confluent-kafka==2.1.1',
    'Cython==0.29.35','cffi==1.15.1','pybind11==2.10.4',
    'numba==0.57.0','ray==2.5.0',
    'prefect==2.10.13','mlflow==2.4.0','wandb==0.15.3','optuna==3.2.0',
    'streamlit==1.23.1','gradio==3.34.0','dash==2.10.2',
    'great-expectations==0.16.14','pandera==0.15.1',
    'dbt-core==1.5.1','sqlfluff==2.1.1',
    'pygments==2.15.1','colorama==0.4.6',
    'filelock==3.12.0','psutil==5.9.5',
    'virtualenv==20.23.0','setuptools==67.8.0','wheel==0.40.0',
]
seen = set(); unique = []
for p in pkgs:
    name = p.split('==')[0].lower()
    if name not in seen: seen.add(name); unique.append(p)
with open(os.path.join(BASE,'python','requirements.txt'),'w') as f:
    f.write('\n'.join(unique)+'\n')
print(f"requirements.txt: {len(unique)} dependencies")

# GO
direct = [
    'github.com/gin-gonic/gin v1.7.0','github.com/go-sql-driver/mysql v1.7.1',
    'github.com/prometheus/client_golang v1.15.1','github.com/sirupsen/logrus v1.9.2',
    'github.com/spf13/viper v1.15.0','go.uber.org/zap v1.24.0',
    'github.com/gorilla/mux v1.8.0','github.com/gorilla/websocket v1.5.0',
    'github.com/gorilla/handlers v1.5.1','github.com/gorilla/sessions v1.2.1',
    'github.com/gorilla/csrf v1.7.1',
    'github.com/labstack/echo/v4 v4.10.2','github.com/gofiber/fiber/v2 v2.46.0',
    'github.com/go-chi/chi/v5 v5.0.8','github.com/julienschmidt/httprouter v1.3.0',
    'github.com/valyala/fasthttp v1.47.0','github.com/go-resty/resty/v2 v2.7.0',
    'github.com/hashicorp/consul/api v1.22.0','github.com/hashicorp/vault/api v1.9.2',
    'github.com/hashicorp/go-multierror v1.1.1','github.com/hashicorp/go-retryablehttp v0.7.4',
    'github.com/aws/aws-sdk-go-v2 v1.18.0',
    'github.com/aws/aws-sdk-go-v2/service/s3 v1.33.1',
    'github.com/aws/aws-sdk-go-v2/service/dynamodb v1.19.7',
    'github.com/aws/aws-sdk-go-v2/service/sqs v1.22.0',
    'github.com/aws/aws-sdk-go-v2/service/sns v1.20.11',
    'github.com/aws/aws-sdk-go-v2/service/lambda v1.35.0',
    'github.com/aws/aws-sdk-go-v2/service/iam v1.20.0',
    'github.com/aws/aws-sdk-go-v2/service/sts v1.19.0',
    'github.com/aws/aws-sdk-go-v2/service/kms v1.22.0',
    'github.com/aws/aws-sdk-go-v2/service/ses v1.15.0',
    'github.com/aws/aws-sdk-go-v2/service/cloudwatch v1.26.0',
    'github.com/aws/aws-sdk-go-v2/service/ec2 v1.98.0',
    'github.com/aws/aws-sdk-go-v2/service/rds v1.44.0',
    'github.com/aws/aws-sdk-go-v2/service/secretsmanager v1.19.8',
    'github.com/aws/aws-sdk-go-v2/config v1.18.25',
    'github.com/aws/aws-sdk-go-v2/credentials v1.13.24',
    'google.golang.org/grpc v1.55.0','google.golang.org/api v0.126.0',
    'cloud.google.com/go/storage v1.30.1','cloud.google.com/go/bigquery v1.52.0',
    'cloud.google.com/go/pubsub v1.31.0','cloud.google.com/go/firestore v1.10.0',
    'cloud.google.com/go/spanner v1.46.0','cloud.google.com/go/logging v1.7.0',
    'cloud.google.com/go/secretmanager v1.11.1',
    'github.com/jmoiron/sqlx v1.3.5','github.com/lib/pq v1.10.9',
    'github.com/jackc/pgx/v5 v5.3.1','github.com/mattn/go-sqlite3 v1.14.17',
    'github.com/go-redis/redis/v9 v9.0.5','go.mongodb.org/mongo-driver v1.11.6',
    'github.com/elastic/go-elasticsearch/v8 v8.8.0',
    'github.com/olivere/elastic/v7 v7.0.32',
    'github.com/neo4j/neo4j-go-driver/v5 v5.9.0',
    'github.com/gocql/gocql v1.5.2',
    'github.com/influxdata/influxdb-client-go/v2 v2.12.3',
    'github.com/golang-migrate/migrate/v4 v4.16.0',
    'github.com/pressly/goose/v3 v3.11.2',
    'gorm.io/gorm v1.25.1','gorm.io/driver/postgres v1.5.2',
    'gorm.io/driver/mysql v1.5.1','gorm.io/driver/sqlite v1.5.1',
    'entgo.io/ent v0.12.3','github.com/Masterminds/squirrel v1.5.4',
    'github.com/segmentio/kafka-go v0.4.40',
    'github.com/streadway/amqp v1.1.0','github.com/nats-io/nats.go v1.27.0',
    'github.com/nsqio/go-nsq v1.1.0',
    'github.com/go-playground/validator/v10 v10.14.0',
    'github.com/stretchr/testify v1.8.4',
    'github.com/onsi/ginkgo/v2 v2.11.0','github.com/onsi/gomega v1.27.8',
    'github.com/golang/mock v1.6.0','github.com/jarcoal/httpmock v1.3.0',
    'github.com/DATA-DOG/go-sqlmock v1.5.0',
    'github.com/alicebob/miniredis/v2 v2.30.3',
    'github.com/testcontainers/testcontainers-go v0.20.1',
    'github.com/PuerkitoBio/goquery v1.8.1',
    'github.com/gocolly/colly/v2 v2.1.0',
    'github.com/spf13/cobra v1.7.0','github.com/urfave/cli/v2 v2.25.5',
    'github.com/fatih/color v1.15.0',
    'github.com/charmbracelet/bubbletea v0.24.1',
    'github.com/charmbracelet/lipgloss v0.7.1',
    'github.com/schollz/progressbar/v3 v3.13.1',
    'github.com/golang-jwt/jwt/v5 v5.0.0',
    'github.com/casbin/casbin/v2 v2.71.1',
    'golang.org/x/crypto v0.9.0','golang.org/x/oauth2 v0.8.0',
    'github.com/coreos/go-oidc/v3 v3.6.0',
    'github.com/robfig/cron/v3 v3.0.1','github.com/hibiken/asynq v0.24.1',
    'github.com/cenkalti/backoff/v4 v4.2.1','github.com/sony/gobreaker v0.5.0',
    'github.com/patrickmn/go-cache v2.1.0+incompatible',
    'github.com/allegro/bigcache/v3 v3.1.0',
    'github.com/dgraph-io/ristretto v0.1.1',
    'github.com/mitchellh/mapstructure v1.5.0','github.com/spf13/cast v1.5.1',
    'github.com/google/uuid v1.3.0','github.com/rs/xid v1.5.0',
    'github.com/shopspring/decimal v1.3.1',
    'github.com/dustin/go-humanize v1.0.1',
    'github.com/yuin/goldmark v1.5.4',
    'github.com/pelletier/go-toml/v2 v2.0.8','gopkg.in/yaml.v3 v3.0.1',
    'github.com/BurntSushi/toml v1.3.2',
    'github.com/tidwall/gjson v1.14.4','github.com/tidwall/sjson v1.2.5',
    'github.com/goccy/go-json v0.10.2',
    'github.com/vmihailenco/msgpack/v5 v5.3.5',
    'google.golang.org/protobuf v1.30.0',
    'github.com/grpc-ecosystem/grpc-gateway/v2 v2.16.0',
    'github.com/grpc-ecosystem/go-grpc-middleware v1.4.0',
    'go.opentelemetry.io/otel v1.16.0',
    'go.opentelemetry.io/otel/sdk v1.16.0',
    'github.com/getsentry/sentry-go v0.22.0',
    'github.com/rs/zerolog v1.29.1',
    'go.uber.org/fx v1.19.3','github.com/google/wire v0.5.0',
    'github.com/samber/lo v1.38.1',
    'golang.org/x/sync v0.3.0','golang.org/x/net v0.10.0',
    'golang.org/x/sys v0.8.0','golang.org/x/text v0.9.0',
    'golang.org/x/time v0.3.0','golang.org/x/tools v0.9.3',
]
indirect = [
    'github.com/beorn7/perks v1.0.1','github.com/cespare/xxhash/v2 v2.2.0',
    'github.com/fsnotify/fsnotify v1.6.0','github.com/gin-contrib/sse v0.1.0',
    'github.com/go-playground/locales v0.14.1',
    'github.com/go-playground/universal-translator v0.18.1',
    'github.com/golang/protobuf v1.5.3','github.com/hashicorp/hcl v1.0.0',
    'github.com/json-iterator/go v1.1.12','github.com/leodido/go-urn v1.2.4',
    'github.com/magiconair/properties v1.8.7',
    'github.com/mattn/go-isatty v0.0.19',
    'github.com/matttproud/golang_protobuf_extensions v1.0.4',
    'github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd',
    'github.com/modern-go/reflect2 v1.0.2',
    'github.com/prometheus/client_model v0.4.0',
    'github.com/prometheus/common v0.44.0',
    'github.com/prometheus/procfs v0.10.1',
    'github.com/spf13/afero v1.9.5',
    'github.com/spf13/jwalterweatherman v1.1.0',
    'github.com/spf13/pflag v1.0.5','github.com/subosito/gotenv v1.4.2',
    'github.com/ugorji/go/codec v1.2.11',
    'go.uber.org/atomic v1.11.0','go.uber.org/multierr v1.11.0',
    'gopkg.in/ini.v1 v1.67.0','gopkg.in/yaml.v2 v2.4.0',
    'github.com/davecgh/go-spew v1.1.1','github.com/pmezard/go-difflib v1.0.0',
    'github.com/klauspost/compress v1.16.5',
    'github.com/valyala/bytebufferpool v1.0.0',
    'github.com/andybalholm/brotli v1.0.5',
    'github.com/mattn/go-colorable v0.1.13',
    'github.com/mattn/go-runewidth v0.0.14',
    'github.com/muesli/termenv v0.15.1','github.com/muesli/reflow v0.3.0',
    'github.com/lucasb-eyer/go-colorful v1.2.0',
    'github.com/containerd/console v1.0.4',
    'github.com/jackc/pgpassfile v1.0.0',
    'github.com/jinzhu/inflection v1.0.0','github.com/jinzhu/now v1.1.5',
    'github.com/golang/snappy v0.0.4',
    'github.com/xdg-go/pbkdf2 v1.0.0','github.com/xdg-go/scram v1.1.2',
    'github.com/montanaflynn/stats v0.7.1',
]
lines = ['module sbom-test-go','','go 1.20','','require (']
for d in direct: lines.append(f'\t{d}')
lines += [')','','require (']
for d in indirect: lines.append(f'\t{d} // indirect')
lines += [')','']
with open(os.path.join(BASE,'go','go.mod'),'w') as f: f.write('\n'.join(lines))
print(f"go.mod: {len(direct)} direct + {len(indirect)} indirect = {len(direct)+len(indirect)} total")

# RUBY
rlines = ["source 'https://rubygems.org'",""]
gems = [
    ("rails","5.2.0"),("nokogiri","1.10.8"),("loofah","2.2.3"),
    ("pg","1.1.0"),("puma","3.12.0"),("devise","4.7.0"),
    ("faraday","1.0.0"),("sidekiq","5.2.0"),("redis","4.1.0"),
    ("rack","2.2.0"),("rack-cors","2.0.0"),
    ("activerecord","7.0.0"),("activesupport","7.0.0"),
    ("actionpack","7.0.0"),("actionmailer","7.0.0"),
    ("actioncable","7.0.0"),("activejob","7.0.0"),
    ("activestorage","7.0.0"),("sprockets","4.2.0"),
    ("turbo-rails","1.4.0"),("stimulus-rails","1.2.0"),
    ("jbuilder","2.11.0"),("bcrypt","3.1.0"),("jwt","2.7.0"),
    ("pundit","2.3.0"),("cancancan","3.5.0"),
    ("omniauth","2.1.0"),("omniauth-google-oauth2","1.1.0"),
    ("doorkeeper","5.6.0"),("warden","1.2.0"),
    ("httparty","0.21.0"),("rest-client","2.1.0"),
    ("typhoeus","1.4.0"),("grpc","1.54.0"),
    ("graphql","2.0.0"),("grape","1.7.0"),
    ("sinatra","3.0.0"),("hanami","2.0.0"),
    ("sequel","5.68.0"),("mongoid","8.1.0"),
    ("elasticsearch-model","7.2.0"),
    ("redis-objects","1.7.0"),("connection_pool","2.4.0"),
    ("resque","2.6.0"),("delayed_job","4.1.0"),
    ("good_job","3.15.0"),("sneakers","2.12.0"),
    ("bunny","2.22.0"),("ruby-kafka","1.5.0"),
    ("whenever","1.0.0"),("clockwork","3.0.0"),
    ("aws-sdk-s3","1.122.0"),("aws-sdk-sqs","1.56.0"),
    ("aws-sdk-sns","1.60.0"),("aws-sdk-dynamodb","1.89.0"),
    ("aws-sdk-lambda","1.96.0"),("aws-sdk-ses","1.50.0"),
    ("aws-sdk-cloudwatch","1.73.0"),("aws-sdk-ec2","1.380.0"),
    ("aws-sdk-iam","1.80.0"),("aws-sdk-kms","1.63.0"),
    ("google-cloud-storage","1.44.0"),("google-cloud-bigquery","1.42.0"),
    ("google-cloud-pubsub","2.15.0"),("azure-storage-blob","2.0.3"),
    ("carrierwave","3.0.0"),("shrine","3.5.0"),
    ("mini_magick","4.12.0"),("image_processing","1.12.0"),
    ("prawn","2.4.0"),("wicked_pdf","2.6.0"),
    ("rubyzip","2.3.0"),("roo","2.10.0"),
    ("aasm","5.5.0"),("dry-validation","1.10.0"),
    ("dry-types","1.7.0"),("dry-struct","1.6.0"),
    ("dry-monads","1.6.0"),
    ("kaminari","1.2.0"),("pagy","6.0.0"),
    ("ransack","4.0.0"),("searchkick","5.2.0"),
    ("friendly_id","5.5.0"),("paper_trail","15.0.0"),
    ("audited","5.3.0"),("rolify","6.0.0"),
    ("acts_as_tenant","0.6.0"),("acts_as_list","1.1.0"),
    ("ancestry","4.3.0"),("geocoder","1.8.0"),
    ("money","6.16.0"),("monetize","1.12.0"),
    ("draper","4.0.0"),("active_model_serializers","0.10.0"),
    ("blueprinter","0.25.0"),("jsonapi-serializer","2.2.0"),
    ("sentry-ruby","5.9.0"),("sentry-rails","5.9.0"),
    ("newrelic_rpm","9.2.0"),("datadog","1.12.0"),
    ("lograge","0.12.0"),("semantic_logger","4.13.0"),
    ("pry","0.14.0"),("pry-byebug","3.10.0"),
    ("better_errors","2.10.0"),("spring","4.1.0"),
    ("listen","3.8.0"),("letter_opener","1.8.0"),
    ("bullet","7.0.0"),("brakeman","6.0.0"),
    ("bundler-audit","0.9.0"),("simplecov","0.22.0"),
    ("vcr","6.1.0"),("shoulda-matchers","5.3.0"),
    ("database_cleaner","2.0.0"),("timecop","0.9.0"),
    ("parallel_tests","4.2.0"),("minitest","5.18.0"),
    ("rack-test","2.1.0"),("rack-attack","6.6.0"),
    ("rack-mini-profiler","3.1.0"),
    ("bootsnap","1.16.0"),("oj","3.14.0"),
    ("multi_json","1.15.0"),("hashie","5.0.0"),
    ("concurrent-ruby","1.2.0"),("eventmachine","1.2.0"),
    ("faye-websocket","0.11.0"),("websocket-driver","0.7.0"),
    ("actiontext","7.0.0"),
]
for name, ver in gems:
    rlines.append(f"gem '{name}', '~> {ver}'")
rlines += ["","group :development, :test do"]
dev_gems = [("rspec-rails","3.8.0"),("factory_bot_rails","5.0.0"),("rubocop","0.74.0"),("rubocop-rails","2.19.0"),("rubocop-rspec","2.22.0"),("faker","3.2.0"),("annotate","3.2.0")]
for name, ver in dev_gems:
    rlines.append(f"  gem '{name}', '~> {ver}'")
rlines += ["end","","group :test do"]
test_gems = [("capybara","3.28.0"),("webmock","3.7.0"),("selenium-webdriver","4.9.0"),("webdrivers","5.3.0")]
for name, ver in test_gems:
    rlines.append(f"  gem '{name}', '~> {ver}'")
rlines += ["end",""]
with open(os.path.join(BASE,'ruby','Gemfile'),'w') as f: f.write('\n'.join(rlines))
total = len(gems)+len(dev_gems)+len(test_gems)
print(f"Gemfile: {total} gems")
